<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QA Cinema</title>    
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/thread.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
 <header class="p-3 text-bg-dark">
    <div class="container">
      <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
        <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
          <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"/></svg>
        </a>

        <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
          	<li><a href="index.html" class="nav-link px-2 text-white" >QA Cinema</a> </li>
          	<li><a href="films.html" class="nav-link px-2 text-white"> Films</a></li>
			<li><a href="screen.html" class="nav-link px-2 text-white"> Screens</a></li>
			        <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
          <input type="search" class="form-control form-control-dark text-bg-dark" placeholder="Search..." aria-label="Search">
        </form>
        	           <!-- new customer register -->
            <a href="newCustomerForm.html" class="nav-link px-2 text-white">register account</a>
            <!-- existing customer update -->
            <a href="updateCustomerForm.html" class="nav-link px-2 text-white">update account</a>
            <!-- new booking  -->
            <a href="#" class="nav-link px-2 text-white">bookings</a>
            <!-- update booking-->
        </ul>


      </div>
    </div>
  </header>
  <div class="top-bar">
    <h1>
        Discussion Board
    </h1>
</div>
<div class="main">
    <div class="header" id="commentHeader">
    </div>
    <textarea></textarea>
    <button id="addComment">add comment</button>
    <div class="comments">
    </div>
</div>

      <footer class="py-5 mainFooter footer mt-auto">
      <div class="container ">
          <div class="row">
            <div class="col-3 col-md-2 mb-3">
              <h5>QA Cinema</h5>
              <ul class="nav flex-column">
                <li class="nav-item mb-2"><a href="index.html" class="nav-link p-0 text-muted">Home</a></li>               
                <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">FAQs</a></li>
                <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">About</a></li>
                <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">Privacy Policy</a></li>
                <li class="nav-item mb-2">1 QA way london E1 2PL</li>
              </ul>
            </div>
          
           <div class="col-6 col-md-2 mb-3">
              <ul class="nav flex-column">
                <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">Contact Us</a></li>
                <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">Terms and Conditions</a></li>
                <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">Cookie Policy</a></li>
              </ul>
            </div>
            <div class="col-6 col-md-2 mb-3">
              <div class="d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top">
                  <p>&copy; 2022 Company, Inc. All rights reserved.</p>
                </div>
          </div>
              
          </div>
          <i class="fa fa-phone"> 01702000000 </i>
              Cinema Number 
              <!-- out of ours numb
                  /+
                  
                  er -->
              <i class="fa fa-clock-o"> 01702000000 </i>
              Out of hours Number 
	</div>    
</footer>
  <script src="./js/data.js"></script>
  <script src="./js/thread.js"></script>
  <script src="./js/bootstrap.bundle.min.js"></script>
  <script>
    let id = window.location.search.slice(1);
    let thread = threads.find(t => t.id == id);
    let header = document.querySelector('.header');
    let headerHtml = `
        <h4 class="title">
            ${thread.title}
        </h4>
        <div class="bottom">
            <p class="timestamp">
                ${new Date(thread.date).toLocaleString()}
            </p>
            <p class="comment-count">
                ${thread.comments.length} comments
            </p>
        </div>
    `
    header.insertAdjacentHTML('beforeend', headerHtml)

    function addComment(comment) {
        let commentHtml = `
            <div class="comment">
                <div class="top-comment">
                    <p class="user">
                        ${comment.author}
                    </p>
                    <p class="comment-ts">
                        ${new Date(comment.date).toLocaleString()}
                    </p>
                </div>
                <div class="comment-content">
                    ${comment.content}
                </div>
            </div>
        `
        comments.insertAdjacentHTML('beforeend', commentHtml);
    }

    let comments = document.querySelector('.comments');
    for (let comment of thread.comments) {
        addComment(comment);
    }

    let btn = document.querySelector('button');
    btn.addEventListener('click', function() {
        var txt = document.querySelector('textarea');
        var comment = {
            content: txt.value,
            date: Date.now(),
            author: ''
        }
        addComment(comment);
        txt.value = '';
        thread.comments.push(comment);
        localStorage.setItem('threads', JSON.stringify(threads));
    })
</script>
</body>
</html>